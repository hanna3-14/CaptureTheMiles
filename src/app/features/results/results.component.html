<app-page-layout>
	<table style="width: 100%">
		<thead>
			<tr>
				<th style="text-align: left">ResultID</th>
				<th style="text-align: left">Event</th>
				<th style="text-align: left">Date</th>
				<th style="text-align: left">Distance</th>
				<th style="text-align: left">Time (gross)</th>
				<th style="text-align: left">Time (net)</th>
				<th style="text-align: left">Category</th>
				<th style="text-align: left">Agegroup</th>
				<th style="text-align: left">Place (total)</th>
				<th style="text-align: left">Place (category)</th>
				<th style="text-align: left">Place (agegroup)</th>
				<th style="text-align: left">Finisher (total)</th>
				<th style="text-align: left">Finisher (category)</th>
				<th style="text-align: left">Finisher (agegroup)</th>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let result of results">
				<td>{{ result.resultId }}</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td>
							<select required [(ngModel)]="eventname">
								<option *ngFor="let event of events" [value]="event.name">
									{{ event.name }}
								</option>
							</select>
						</td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ events[result.eventId - 1].name }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input type="date" [(ngModel)]="result.date" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.date }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<select required [(ngModel)]="result.distance">
							<option *ngFor="let distance of distances" [value]="distance">
								{{ distance }}
							</option>
						</select>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.distance }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td>
							<input type="number" [(ngModel)]="result.timeGross.hours" />
							<input type="number" [(ngModel)]="result.timeGross.minutes" />
							<input type="number" [(ngModel)]="result.timeGross.seconds" />
						</td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>
							{{ result.timeGross.hours }}:{{
								result.timeGross.minutes!!.toString().padStart(2, '0')
							}}:{{ result.timeGross.seconds!!.toString().padStart(2, '0') }}
						</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td>
							<input type="number" [(ngModel)]="result.timeNet.hours" />
							<input type="number" [(ngModel)]="result.timeNet.minutes" />
							<input type="number" [(ngModel)]="result.timeNet.seconds" />
						</td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>
							{{ result.timeNet.hours }}:{{
								result.timeNet.minutes!!.toString().padStart(2, '0')
							}}:{{ result.timeNet.seconds!!.toString().padStart(2, '0') }}
						</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input [(ngModel)]="result.category" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.category }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input [(ngModel)]="result.agegroup" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.agegroup }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input type="number" [(ngModel)]="result.place.total" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.place.total }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input type="number" [(ngModel)]="result.place.category" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.place.category }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input type="number" [(ngModel)]="result.place.agegroup" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.place.agegroup }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input type="number" [(ngModel)]="result.finisher.total" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.finisher.total }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td>
							<input type="number" [(ngModel)]="result.finisher.category" />
						</td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.finisher.category }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td>
							<input type="number" [(ngModel)]="result.finisher.agegroup" />
						</td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.finisher.agegroup }}</td>
					</div>
				</td>
				<td><button (click)="editResult(result)">edit</button></td>
				<td><button (click)="saveResult(result)">save</button></td>
				<td><button (click)="removeResult(result.resultId)">delete</button></td>
			</tr>
		</tbody>
	</table>
	<app-result-form [distances]="distances"></app-result-form>
</app-page-layout>
