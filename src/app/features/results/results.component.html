<app-page-layout>
	<table style="width: 100%">
		<thead>
			<tr>
				<th style="text-align: left">Event</th>
				<th style="text-align: left">Date</th>
				<th style="text-align: left">Distance</th>
				<th style="text-align: left">Time (gross)</th>
				<th style="text-align: left">Time (net)</th>
				<th style="text-align: left">Category</th>
				<th style="text-align: left">Agegroup</th>
				<th style="text-align: left">Place (total)</th>
				<th style="text-align: left">Place (category)</th>
				<th style="text-align: left">Place (agegroup)</th>
				<th style="text-align: left">Finisher (total)</th>
				<th style="text-align: left">Finisher (category)</th>
				<th style="text-align: left">Finisher (agegroup)</th>
				<th style="text-align: left">Relative Place (total)</th>
				<th style="text-align: left">Relative Place (category)</th>
				<th style="text-align: left">Relative Place (agegroup)</th>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let result of results">
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td>
							<select required [(ngModel)]="eventname">
								<option *ngFor="let event of events" [value]="event.name">
									{{ event.name }}
								</option>
							</select>
						</td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ events[result.eventId - 1].name }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input type="date" [(ngModel)]="result.date" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.date }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<select required [(ngModel)]="distancename">
							<option
								*ngFor="let distance of distances"
								[value]="distance.name"
							>
								{{ distance.name }}
							</option>
						</select>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ distances[result.distanceId - 1].name }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td>
							<input type="number" [(ngModel)]="result.timeGross.hours" />
							<input type="number" [(ngModel)]="result.timeGross.minutes" />
							<input type="number" [(ngModel)]="result.timeGross.seconds" />
						</td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>
							{{ result.timeGross.hours }}:{{
								result.timeGross.minutes!!.toString().padStart(2, '0')
							}}:{{ result.timeGross.seconds!!.toString().padStart(2, '0') }}
						</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td>
							<input type="number" [(ngModel)]="result.timeNet.hours" />
							<input type="number" [(ngModel)]="result.timeNet.minutes" />
							<input type="number" [(ngModel)]="result.timeNet.seconds" />
						</td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>
							{{ result.timeNet.hours }}:{{
								result.timeNet.minutes!!.toString().padStart(2, '0')
							}}:{{ result.timeNet.seconds!!.toString().padStart(2, '0') }}
						</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input [(ngModel)]="result.category" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.category }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input [(ngModel)]="result.agegroup" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.agegroup }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input type="number" [(ngModel)]="result.place.total" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.place.total }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input type="number" [(ngModel)]="result.place.category" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.place.category }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input type="number" [(ngModel)]="result.place.agegroup" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.place.agegroup }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td><input type="number" [(ngModel)]="result.finisher.total" /></td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.finisher.total }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td>
							<input type="number" [(ngModel)]="result.finisher.category" />
						</td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.finisher.category }}</td>
					</div>
				</td>
				<td>
					<div *ngIf="editMode[result.resultId]">
						<td>
							<input type="number" [(ngModel)]="result.finisher.agegroup" />
						</td>
					</div>
					<div *ngIf="!editMode[result.resultId]">
						<td>{{ result.finisher.agegroup }}</td>
					</div>
				</td>
				<td>
					<div>
						<td>{{ result.relativePlaces.total }}</td>
					</div>
				</td>
				<td>
					<div>
						<td>{{ result.relativePlaces.category }}</td>
					</div>
				</td>
				<td>
					<div>
						<td>{{ result.relativePlaces.agegroup }}</td>
					</div>
				</td>
				<td>
					<div class="update-buttons">
						<button class="update-button" (click)="editResult(result)">
							edit
						</button>
						<button class="update-button" (click)="saveResult(result)">
							save
						</button>
						<button
							class="update-button"
							(click)="removeResult(result.resultId)"
						>
							delete
						</button>
					</div>
				</td>
			</tr>
		</tbody>
	</table>
	<div class="input-forms">
		<app-result-form [distances]="distances"></app-result-form>
		<app-distance-form (distances)="(distances)"></app-distance-form>
	</div>
</app-page-layout>
